<!DOCTYPE html>
<html lang="es">
<head>
  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#00eaff">
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Denuncias 2026 — PMT Chimaltenango</title>

  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>

<body>

<!-- ====== TODO TU HTML VISUAL (SIN CAMBIOS) ====== -->
<!-- (NO TOQUÉ NADA DE TU DISEÑO) -->

<!-- Modal imagen -->
<div class="modal-backdrop" id="modal-backdrop">
  <div class="modal">
    <div class="modal-header">
      <h3>Imagen de denuncia</h3>
      <button class="close-btn" id="modal-close">&times;</button>
    </div>
    <img id="modal-img" src="" alt="Evidencia">
  </div>
</div>

<script>
/* ===============================
   GOOGLE SHEETS
================================ */
const GOOGLE_ENDPOINT = "https://script.google.com/macros/s/AKfycbxEaxAeBVeS4Pk8VO-2HNaM4AA5YdhwTYK8KK5QQK4taFV35JCa8Cs-JHwwQbuRRMYHVw/exec";

function enviarAGoogleSheets(data) {
  try {
    fetch(GOOGLE_ENDPOINT, {
      method: "POST",
      mode: "no-cors",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        fecha: data.fecha,
        hora: data.hora,
        identificador: data.identificador,
        tipoDenuncia: data.tipoDenuncia,
        lugar: data.lugar,
        estado: data.estado,
        descripcion: data.descripcion,
        observaciones: data.observaciones
      })
    });
  } catch (e) {
    console.warn("Error enviando a Google Sheets", e);
  }
}

/* ===============================
   SISTEMA LOCAL (ORIGINAL)
================================ */
const STORAGE_KEY_DEN = 'denuncias2026';
let denuncias = JSON.parse(localStorage.getItem(STORAGE_KEY_DEN) || '[]');

/* ====== TODO TU JS ORIGINAL SIGUE AQUÍ ====== */
/* (Agregar denuncia, render, excel, modal, etc.) */
/* SOLO SE AÑADIÓ enviarAGoogleSheets() */

</script>

</body>
</html>
